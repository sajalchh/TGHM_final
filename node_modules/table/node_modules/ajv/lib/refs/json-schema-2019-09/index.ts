import type Ajv from "../../core"
import type {AnySchemaObject} from "../../types"
<<<<<<< HEAD
import * as metaSchema from "./schema.json"
import * as applicator from "./meta/applicator.json"
import * as content from "./meta/content.json"
import * as core from "./meta/core.json"
import * as format from "./meta/format.json"
import * as metadata from "./meta/meta-data.json"
import * as validation from "./meta/validation.json"
=======
import metaSchema = require("./schema.json")
import metaApplicator = require("./meta/applicator.json")
import metaContent = require("./meta/content.json")
import metaCore = require("./meta/core.json")
import metaFormat = require("./meta/format.json")
import metaMetadata = require("./meta/meta-data.json")
import metaValidation = require("./meta/validation.json")
>>>>>>> c9839472c444f6ec2829e00bb0169a884834f986

const META_SUPPORT_DATA = ["/properties"]

export default function addMetaSchema2019(this: Ajv, $data?: boolean): Ajv {
  ;[
    metaSchema,
<<<<<<< HEAD
    applicator,
    content,
    core,
    with$data(this, format),
    metadata,
    with$data(this, validation),
=======
    metaApplicator,
    metaContent,
    metaCore,
    with$data(this, metaFormat),
    metaMetadata,
    with$data(this, metaValidation),
>>>>>>> c9839472c444f6ec2829e00bb0169a884834f986
  ].forEach((sch) => this.addMetaSchema(sch, undefined, false))
  return this

  function with$data(ajv: Ajv, sch: AnySchemaObject): AnySchemaObject {
    return $data ? ajv.$dataMetaSchema(sch, META_SUPPORT_DATA) : sch
  }
}
