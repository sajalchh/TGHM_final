{"ast":null,"code":"import { Account } from \"./Account\";\nimport { AccountType, AgentStatus, ApprovalStatus, FoodType } from \"./Enum\";\nimport { Menu } from \"./Menu\";\nimport { Management } from \"./Management\";\nimport { Item } from \"./Item\";\nimport { System } from \"./System\";\nexport class Restaurant extends Account {\n  //private __agentTimeToGetBack : Array<number> = [];\n  constructor(name, username, password, station) {\n    super(name, username, new Date(), AccountType.Restaurant, password);\n    this.orderlist = [];\n    this.__timeToReach = [];\n    this.__agent = [];\n    this.__agentStatus = [];\n    this.accetanceStatus = ApprovalStatus[0];\n    this.Menu = new Menu();\n    this.certi = [];\n    this.servingStation = void 0;\n    Management.Application.push(this); //this.__timeToReach = timeToReach;\n\n    this.servingStation = station.getID();\n    Management.loginR.set(username, this);\n  }\n\n  getPrice(s) {\n    return this.Menu.getPrice(s);\n  }\n\n  addItem(s, price, type) {\n    let item = new Item(s, price, type, this.getID());\n    this.Menu.addItem(item);\n    let ms = Management.stationList.get(this.servingStation);\n    if (ms) ms.addItem(item);\n  }\n\n  removeItem(item) {\n    this.Menu.removeItem(item);\n    let ms = Management.stationList.get(this.servingStation);\n    if (ms) ms.removeItem(item);\n  }\n\n  provideCerti(file) {\n    this.certi.push(file);\n  }\n\n  AddAgent(agent) {\n    this.__agent.push(agent.getID());\n\n    this.__agentStatus.push(AgentStatus[0]);\n\n    System.active_agent.push(agent);\n    agent.addRestaurant(this);\n  }\n\n  removeAgent(agent) {\n    let index = this.__agent.indexOf(agent.getID());\n\n    this.__agent.slice(index); //this.__agentTimeToGetBack.slice(index);\n\n\n    this.__agentStatus.splice(index);\n\n    System.active_agent.slice(System.active_agent.indexOf(agent));\n  }\n\n  getAgents() {\n    return this.__agent;\n  } //getClosestAgent(){\n  //    return Math.min.apply(Math,this.__agentTimeToGetBack);   \n  //}\n\n\n  allotAgent(order, agent, time = null) {\n    let index = this.__agent.indexOf(agent.getID());\n\n    let ag = Management.agentList.get(this.__agent[index]);\n    if (ag) ag.updateAllotedOrder(order);\n  }\n\n  updateOrderStatus(orderId, status, Item) {\n    for (let i of this.orderlist) {\n      if (i.orderId == orderId) {\n        i.updateOrderStatus(status, Item);\n      }\n    }\n  } //addStation(Station : Station, time:Time){\n  //    Station.addRestaurant(this);\n  //    this.__timeToReach.push(time);\n  //    for(let i of this.Menu.getMenuItems()){\n  //        Station.addItem(i);\n  //    }\n  //    this.servingStation.push(Station.getID());\n  // }\n\n\n  addBrand(newuser, password, Station) {\n    let s = new Restaurant(this._name, newuser, password, Station);\n\n    for (let i of this.Menu.getMenuItems()) {\n      let type = i.type;\n      s.addItem(i.name, i.price, FoodType[i.type]);\n    }\n  }\n\n  getOrderDetails(orderId) {\n    for (let i of this.orderlist) {\n      if (i.orderId == orderId) {\n        return i.getItemList(this);\n      }\n    }\n  }\n\n  getOrderStations(orderId) {\n    for (let i of this.orderlist) {\n      if (i.orderId == orderId) {\n        return this.servingStation;\n      }\n    }\n\n    return null;\n  }\n\n  updateAgentStatus(agent, status) {\n    let index = this.__agent.indexOf(agent.getID());\n\n    this.__agentStatus[index] = AgentStatus[status];\n  }\n\n  getFreeAgents() {\n    let i = 0;\n    let v = [];\n\n    for (let x of this.__agentStatus) {\n      if (x == AgentStatus[0]) {\n        let y = Management.agentList.get(this.__agent[i]);\n        if (y) v.push(y);\n      }\n\n      i++;\n    }\n\n    return v;\n  }\n\n}","map":{"version":3,"sources":["C:/Users/shash/OneDrive/Desktop/Gits/TGHM_final/src/Logic/Restaurant.ts"],"names":["Account","AccountType","AgentStatus","ApprovalStatus","FoodType","Menu","Management","Item","System","Restaurant","constructor","name","username","password","station","Date","orderlist","__timeToReach","__agent","__agentStatus","accetanceStatus","certi","servingStation","Application","push","getID","loginR","set","getPrice","s","addItem","price","type","item","ms","stationList","get","removeItem","provideCerti","file","AddAgent","agent","active_agent","addRestaurant","removeAgent","index","indexOf","slice","splice","getAgents","allotAgent","order","time","ag","agentList","updateAllotedOrder","updateOrderStatus","orderId","status","i","addBrand","newuser","Station","_name","getMenuItems","getOrderDetails","getItemList","getOrderStations","updateAgentStatus","getFreeAgents","v","x","y"],"mappings":"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","sourcesContent":["import {Account} from \"./Account\"\r\nimport {AccountType,AgentStatus,ApprovalStatus,FoodType} from \"./Enum\"\r\nimport {Menu} from \"./Menu\"\r\nimport {Management} from \"./Management\"\r\nimport {Item} from \"./Item\"\r\nimport {Agent} from \"./Agent\"\r\nimport {Certi} from \"./Certificate\"\r\nimport {Station} from \"./Station\"\r\nimport {Order} from \"./Order\"\r\nimport {System} from \"./System\"\r\nimport { Time } from \"./Time\"\r\n\r\nexport class Restaurant extends Account{\r\n    orderlist : Array<Order> = [];\r\n    private __timeToReach : Array<Time> = [];\r\n    private __agent : Array<number> = [];\r\n    private __agentStatus: Array<string> = [];\r\n    //private __agentTimeToGetBack : Array<number> = [];\r\n    accetanceStatus = ApprovalStatus[0];\r\n    Menu = new Menu();\r\n    certi: Array<Certi> = [];\r\n    servingStation : number;\r\n    \r\n    constructor(name:string,username:string,password:string,station:Station) {\r\n        super(name,username,new Date(),AccountType.Restaurant,password);\r\n        Management.Application.push(this);\r\n        //this.__timeToReach = timeToReach;\r\n        this.servingStation = station.getID();\r\n        Management.loginR.set(username, this);\r\n    }\r\n    getPrice(s : string){\r\n        return this.Menu.getPrice(s);\r\n    }\r\n    addItem(s : string , price : number, type:number){\r\n        let item = new Item(s, price, type, this.getID());\r\n        this.Menu.addItem(item);\r\n        let ms=Management.stationList.get(this.servingStation);\r\n        if(ms)\r\n        ms.addItem(item);\r\n    }\r\n    removeItem(item:Item){\r\n        this.Menu.removeItem(item);\r\n        let ms=Management.stationList.get(this.servingStation);\r\n        if(ms)\r\n        ms.removeItem(item);\r\n    }\r\n    provideCerti(file : Certi){\r\n        this.certi.push(file);\r\n    }\r\n    AddAgent(agent : Agent){\r\n        this.__agent.push(agent.getID());\r\n        this.__agentStatus.push(AgentStatus[0]);\r\n        System.active_agent.push(agent);\r\n        agent.addRestaurant(this);\r\n    }\r\n    removeAgent(agent : Agent){\r\n        let index = this.__agent.indexOf(agent.getID());\r\n        this.__agent.slice(index);\r\n        //this.__agentTimeToGetBack.slice(index);\r\n        this.__agentStatus.splice(index);\r\n        System.active_agent.slice(System.active_agent.indexOf(agent));\r\n    }\r\n\r\n    getAgents(){\r\n        return this.__agent;\r\n    }\r\n\r\n    //getClosestAgent(){\r\n    //    return Math.min.apply(Math,this.__agentTimeToGetBack);   \r\n    //}\r\n    allotAgent(order: Order,agent : Agent,time : number|null = null){\r\n        let index = this.__agent.indexOf(agent.getID());\r\n        let ag=Management.agentList.get(this.__agent[index]);\r\n        if(ag)\r\n            ag.updateAllotedOrder(order);\r\n         \r\n    }\r\n    updateOrderStatus(orderId : number,status : number, Item : Item){\r\n        for(let i of this.orderlist){\r\n            if(i.orderId ==orderId){\r\n                i.updateOrderStatus(status,Item);\r\n            }\r\n        }\r\n    }\r\n    //addStation(Station : Station, time:Time){\r\n    //    Station.addRestaurant(this);\r\n    //    this.__timeToReach.push(time);\r\n    //    for(let i of this.Menu.getMenuItems()){\r\n    //        Station.addItem(i);\r\n    //    }\r\n    //    this.servingStation.push(Station.getID());\r\n    // }\r\n    addBrand(newuser : string,password : string,Station : Station){\r\n        let s = new Restaurant(this._name,newuser,password,Station);\r\n        for(let i of this.Menu.getMenuItems()){\r\n            let type : string = i.type\r\n            s.addItem(i.name,i.price,(<any>FoodType)[i.type]);\r\n        }\r\n    }\r\n    getOrderDetails(orderId : number){\r\n        for(let i of this.orderlist){\r\n            if(i.orderId ==orderId){\r\n                return i.getItemList(this);\r\n            }\r\n        }\r\n    }\r\n    getOrderStations(orderId: number){\r\n        for(let i of this.orderlist){\r\n            if(i.orderId ==orderId){\r\n                return this.servingStation;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    updateAgentStatus(agent : Agent,status: number){\r\n        let index = this.__agent.indexOf(agent.getID());\r\n        this.__agentStatus[index] = AgentStatus[status];\r\n    }\r\n\r\n    getFreeAgents() : Array<Agent>{\r\n        let i=0;\r\n        let v : Array<Agent> = [];\r\n        for(let x of this.__agentStatus){\r\n            if(x==AgentStatus[0]){\r\n                let y = Management.agentList.get(this.__agent[i]);\r\n                if(y)\r\n                v.push(y);\r\n            }\r\n            i++;\r\n        }\r\n        return v;\r\n    }\r\n\r\n}"]},"metadata":{},"sourceType":"module"}